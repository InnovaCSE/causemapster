e veux que tu crÃ©es une page React /auto-test (fichier AutoTest.tsx) pour simuler automatiquement un test complet du logiciel Arbre des Causes.
Lâ€™objectif est de valider tout le parcours utilisateur, sans intervention humaine. Ã€ la fin, la page doit afficher si le logiciel est 100 % fonctionnel, ou lister les erreurs dÃ©tectÃ©es avec prÃ©cision.

ğŸ” Ã‰tapes Ã  automatiser (dans cet ordre) :
CrÃ©ation dâ€™un accident de travail

Simule la saisie dâ€™un accident (date, lieu, Ã©tablissement, faits ultimes, victime, tÃ©moins, fichiers).

Enregistre dans Supabase (table accidents).

VÃ©rifie que les donnÃ©es sont bien prÃ©sentes.

Ajout de tÃ©moins

Ajoute au moins deux tÃ©moins Ã  lâ€™accident.

Stocke dans Supabase (temoins).

VÃ©rifie la liaison accident â†” tÃ©moins.

Analyse automatique des tÃ©moignages

Simule une transcription avec plusieurs lignes.

Classe chaque ligne en : Fait avÃ©rÃ©, Opinion, Ã€ vÃ©rifier, Preuve.

Enregistre chaque fragment dans fragments_temoignages.

VÃ©rifie que tous les types sont bien prÃ©sents et que le total correspond au nombre de lignes.

GÃ©nÃ©ration automatique de lâ€™arbre des causes

Injecte au moins 3 faits nÃ©cessaires + 2 faits habituels.

CrÃ©e des liens logiques : enchaÃ®nement, conjonction, disjonction.

Enregistre dans Supabase (arbre_causes, liens).

Validation de lâ€™arbre par rÃ´le

Simule validation par 2 rÃ´les : CSE + employeur.

Enregistre les validations dans Supabase.

VÃ©rifie que la signature est prÃ©sente et horodatÃ©e.

Export de lâ€™arbre

Simule la gÃ©nÃ©ration dâ€™un PNG de lâ€™arbre.

VÃ©rifie que le fichier est tÃ©lÃ©chargeable ou correctement gÃ©nÃ©rÃ© (mock OK si pas dâ€™image rÃ©elle).

Nettoyage automatique

Supprime les donnÃ©es testÃ©es Ã  la fin ou isole-les dans un ID test-auto-YYYYMMDD.

Affichage du rÃ©sultat final

Si tout fonctionne : âœ… Logiciel pleinement opÃ©rationnel

Sinon : âŒ Liste prÃ©cise des Ã©tapes ayant Ã©chouÃ© (avec ID accident + description de lâ€™erreur Supabase)

ğŸ§  Contraintes techniques :
Utilise Supabase (via supabaseClient.ts)

Affiche un indicateur de progression (Ã©tape 1/7, etc.)

Envoie les erreurs dans la console aussi

Code TypeScript propre et commentÃ©

Page accessible via /auto-test